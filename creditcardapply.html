<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Credit Card Application Form</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background: #f5f7fb;
            margin: 0;
            padding: 30px 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .form-container {
            width: 100%;
            max-width: 500px;
            background: #fff;
            padding: 35px 40px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.06);
        }

        label {
            display: block;
            margin: 12px 0 6px;
            font-weight: 600;
        }

        input,
        select {
            width: 100%;
            padding: 12px;
            border: 1px solid #cfd5de;
            border-radius: 7px;
            background: #fafafa;
        }

        button {
            margin-top: 25px;
            width: 100%;
            padding: 14px 0;
            background: #236bbd;
            color: #fff;
            border: none;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
        }

        .error-message {
            color: red;
            font-size: 13px;
            display: none;
        }

        #cardLimit {
            background: #e8eef6;
        }
    </style>
</head>

<body>
    <div class="form-container">
        <h2 style="text-align:center;color:#236bbd">Credit Card Application</h2>

        <form id="creditCardForm">

            <label>Account Number</label>
            <input type="text" id="accountNumber">
            <div class="error-message" id="accountNumberError">Minimum 8 digits</div>

            <label>Full Name</label>
            <input type="text" id="fullname">
            <div class="error-message" id="fullnameError">Required</div>

            <label>Date of Birth</label>
            <input type="date" id="dob">
            <div class="error-message" id="dobError">Must be 18+</div>

            <label>Email</label>
            <input type="email" id="email">
            <div class="error-message" id="emailError">Invalid Email</div>

            <label>Phone</label>
            <input type="text" id="phone">
            <div class="error-message" id="phoneError">Enter 10 digit number</div>

            <label>Address</label>
            <input type="text" id="address">
            <div class="error-message" id="addressError">Required</div>

            <label>Monthly Income (INR)</label>
            <input type="number" id="income">
            <div class="error-message" id="incomeError">Enter valid income</div>

            <label>Card Type</label>
            <select id="cardType">
                <option value="">Select Card</option>
                <option value="Classic">Classic Card</option>
                <option value="Gold">Gold Card</option>
                <option value="Platinum">Platinum Card</option>
                <option value="Elite">Elite Card</option>
            </select>
            <div class="error-message" id="cardTypeError">Required</div>

            <label>Estimated Annual Limit</label>
            <input type="text" id="cardLimit" readonly>

            <label>PAN Number</label>
            <input type="text" id="pan" maxlength="10">
            <div class="error-message" id="panError">Invalid PAN</div>

            <label>Aadhaar (optional)</label>
            <input type="text" id="aadhaar" maxlength="12">
            <div class="error-message" id="aadhaarError">Must be 12 digits</div>

            <label>Upload ID Proof (JPG/PNG/PDF)</label>
            <input type="file" id="idProof" accept=".jpg,.jpeg,.png,.pdf">
            <div class="error-message" id="idProofError">Upload required</div>

            <div style="margin-top:15px;">
                <input type="checkbox" id="terms">
                <label>I accept Terms</label>
            </div>
            <div class="error-message" id="termsError">Required</div>

            <button type="submit">Apply Now</button>
        </form>
    </div>

    <script>
        const limitMultiplier = { Classic: 10, Gold: 15, Platinum: 20, Elite: 30 };
        const income = document.getElementById("income");
        const cardType = document.getElementById("cardType");
        const cardLimit = document.getElementById("cardLimit");

        income.oninput = cardType.onchange = () => {
            const val = Number(income.value);
            const type = cardType.value;
            cardLimit.value = (val && type) ? (val * limitMultiplier[type]).toLocaleString() : "";
        };

        function showError(id) {
            document.getElementById(id).style.display = "block";
            return false;
        }

        document.getElementById("creditCardForm").onsubmit = function (e) {
            e.preventDefault();
            let ok = true;
            document.querySelectorAll(".error-message").forEach(x => x.style.display = "none");

            const phoneReg = /^[0-9]{10}$/;
            const panReg = /^[A-Z]{5}[0-9]{4}[A-Z]$/;
            const accountReg = /^[0-9]{12}$/; // NEW
            const aadhaar = document.getElementById("aadhaar").value.trim();

            if (!accountReg.test(accountNumber.value)) {
                document.getElementById('accountNumberError').textContent = "Account Number must be 12 digits";
                ok = showError('accountNumberError');
            }

            if (!fullname.value) ok = showError('fullnameError');
            if (!dob.value) ok = showError('dobError');
            if (!email.value) ok = showError('emailError');

            if (!phoneReg.test(phone.value)) {
                document.getElementById('phoneError').textContent = "Phone Number must be 10 digits";
                ok = showError('phoneError');
            }

            if (!address.value) ok = showError('addressError');
            if (!income.value || income.value <= 0) ok = showError('incomeError');
            if (!cardType.value) ok = showError('cardTypeError');
            if (!panReg.test(pan.value)) ok = showError('panError');

            if (aadhaar && !/^\d{12}$/.test(aadhaar)) {
                document.getElementById('aadhaarError').textContent = "Aadhaar must be 12 digits";
                ok = showError('aadhaarError');
            }

            if (!idProof.files.length) ok = showError('idProofError');
            if (!terms.checked) ok = showError('termsError');

            if (!ok) return;

            const ref = "CC" + Math.floor(100000 + Math.random() * 900000);

            let list = JSON.parse(localStorage.getItem("lndbCreditCardApplications")) || [];
            list.push({
                refNo: ref,
                name: fullname.value,
                account: accountNumber.value,
                phone: phone.value,
                cardType: cardType.value,
                annualLimit: cardLimit.value,
                status: "Pending",
                date: new Date().toLocaleDateString()
            });

            localStorage.setItem("lndbCreditCardApplications", JSON.stringify(list));
            localStorage.setItem("lastCreditRef", ref);

            window.location.href = "creditsub.html";
        };
    </script>
</body>

</html>